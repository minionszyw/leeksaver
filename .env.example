# ======================
# LeekSaver 环境变量配置
# ======================

# 应用配置
APP_NAME=LeekSaver
APP_ENV=development
DEBUG=true

# API 配置
API_HOST=0.0.0.0
API_PORT=8000

# PostgreSQL 配置
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_USER=leeksaver
POSTGRES_PASSWORD=leeksaver_password
POSTGRES_DB=leeksaver

# Redis 配置
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0

# Celery 配置
CELERY_BROKER_URL=redis://localhost:6379/0
CELERY_RESULT_BACKEND=redis://localhost:6379/1

# LLM 配置 (支持多服务商)
LLM_PROVIDER=deepseek
# DeepSeek
DEEPSEEK_API_KEY=your_deepseek_api_key
DEEPSEEK_BASE_URL=https://api.deepseek.com/v1
DEEPSEEK_MODEL=deepseek-chat
# OpenAI (可选)
OPENAI_API_KEY=your_openai_api_key
OPENAI_MODEL=gpt-4-turbo-preview
# Ollama (可选, 本地模型)
OLLAMA_BASE_URL=http://localhost:11434
OLLAMA_MODEL=qwen2.5:14b

# 向量服务配置（独立于 LLM）
EMBEDDING_PROVIDER=openai  # 可选：openai, siliconflow, ollama

# OpenAI 向量配置
EMBEDDING_OPENAI_API_KEY=your_openai_api_key
EMBEDDING_OPENAI_MODEL=text-embedding-3-small
EMBEDDING_OPENAI_DIMENSION=1536

# SiliconFlow 向量配置（可选）
# EMBEDDING_SILICONFLOW_API_KEY=your_siliconflow_api_key
# EMBEDDING_SILICONFLOW_BASE_URL=https://api.siliconflow.cn/v1
# EMBEDDING_SILICONFLOW_MODEL=BAAI/bge-large-zh-v1.5
# EMBEDDING_SILICONFLOW_DIMENSION=1024

# Ollama 向量配置（可选）
# EMBEDDING_OLLAMA_BASE_URL=http://localhost:11434
# EMBEDDING_OLLAMA_MODEL=nomic-embed-text
# EMBEDDING_OLLAMA_DIMENSION=768

# 数据清理配置
NEWS_RETENTION_DAYS=90
NEWS_CLEANUP_PROTECT_WATCHLIST=true

# 分层调度策略配置

# L1 - 日更组：收盘后统一同步时间（格式：HH:MM，24小时制）
# 适用于：龙虎榜、估值、财报、宏观数据、技术指标、资金面数据
SYNC_L1_DAILY_TIME=17:30

# L2 - 日内组：高频更新间隔（单位：秒）
# 适用于：新闻资讯、自选股行情、板块异动、向量生成
# 推荐值：300（5分钟）
SYNC_L2_INTERVAL_SECONDS=300

# L2 任务错开间隔（单位：秒）
# 避免任务同时执行造成资源竞争
# 推荐值：120（2分钟）
SYNC_L2_TASK_OFFSET_SECONDS=120

# L3 - 按需组：实时数据缓存失效时间（单位：秒）
# 适用于：单股详情页查询
REALTIME_CACHE_TTL=10

# 特殊任务配置

# 财务报表同步（默认：每周六 20:00）
SYNC_FINANCIAL_DAY_OF_WEEK=6
SYNC_FINANCIAL_HOUR=20
SYNC_FINANCIAL_MINUTE=0

# 新闻清理（默认：每周一凌晨 2:00）
CLEANUP_NEWS_DAY_OF_WEEK=0
CLEANUP_NEWS_HOUR=2
CLEANUP_NEWS_MINUTE=0

# 日志配置
LOG_LEVEL=INFO
LOG_FORMAT=json
